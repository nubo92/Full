<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>이벤트 제어</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; }
        .form-group { margin-bottom: 10px; }
        .error-message { color: red; font-size: 12px; }
        .modal-background {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex; align-items: center; justify-content: center;
        }
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
        }
    </style>
</head>
<body>
<h1>이벤트 제어: preventDefault와 stopPropagation</h1>

<hr>

<h3>1. `preventDefault`: 브라우저의 '자동 반응' 멈추기</h3>
<pre>
    폼(form)을 제출하면 페이지가 새로고침되는 것이 브라우저의 '기본 동작'입니다.
    `preventDefault`를 사용하면, 이 기본 동작을 막고 우리가 원하는 작업을 먼저 수행할 수 있습니다.
    (예: 사용자가 입력한 값의 유효성 검사)
    </pre>

<form id="login-form">
    <div class="form-group">
        <label for="username">아이디:</label>
        <input type="text" id="username">
    </div>
    <p class="error-message"></p>
    <button type="submit">로그인</button>

</form>

<script>
    const $loginFrom = document.getElementById('login-form');
    const $usernameInput = document.getElementById('username');
    const $errirMessage = document.querySelector('.error-message');

    $loginFrom.addEventListener('submit', (e) => {
        // 1. 자동 새로고침 기본 동착을 멈춘다.
        e.preventDefault();

        // 2. 유효성 검사 수행
        if ($usernameInput.value.trim() === '') {
            $errirMessage.textContent = '아이디를 입력해주세요~!';
        } else {
            $errirMessage.textContent = '';
            console.log(`서버로 제줄할 아이디 : ${$usernameInput.value}`);
            // 실제 서버로 데이터를 보내는 코드
            alert('로그인 성공!');
        }
    });
</script>

<hr>

<h3>2. `stopPropagation`: 이벤트의 '연쇄 보고(버블링)' 멈추기</h3>
<pre>
    모달 창의 회색 배경을 클릭하면 창이 닫혀야 합니다.
    하지만 모달 창의 흰색 내용 부분을 클릭했을 때는 닫히면 안 되겠죠?
    이때 'stopPropagation'을 사용해, 이벤트가 부모(회색 배경)로 전파되는 것을 막습니다.
    </pre>

<div id="modal-background" class="modal-background">
    <div id="modal-content" class="modal-content">
        <h3>모달 창</h3>
        <p>이 흰색 영역을 클릭해도 모달은 닫히지 않아야 합니다.</p>
        <p>하지만 바깥 회색 영역을 클릭하면 닫힙니다.</p>
    </div>
</div>

<script>
    const $modalBg = document.getElementById('modal-background');
    const $modalContent = document.getElementById('modal-content');

    // 회색 배경(부모)를 클릭하면 모달을 닫는다.
    $modalBg.addEventListener('click', () => {
        $modalBg.style.display = 'none';
    });

    // 흰색 배경(자식)을 클릭했을 때의 처리
    $modalContent.addEventListener('click', (e) => {
        // 이벤트 버블링 멈춘다.
        e.stopPropagation();

        // 내용 부분을 클릭했을 때만 수행할 다른 작업 추가
    });
</script>
</body>
</html>