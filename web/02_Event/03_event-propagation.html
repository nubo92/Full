<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>이벤트 전파와 위임</title>
    <style>
        ul { background: lightgray; padding: 20px; }
        li { background: lightblue; margin: 10px; }
        .highlight { font-weight: bolder; text-decoration: underline; color: crimson; }
    </style>
</head>
<body>
<h1>이벤트 전파(Propagation)와 위임(Delegation)</h1>

<hr>

<h3>1. 이벤트 버블링: 연못의 파문처럼!</h3>
<pre>
    하위 요소에서 발생한 이벤트는, 그 파문이 부모 요소를 따라 최상위까지 올라가는 '버블링' 현상을 일으킵니다.
    따라서 부모 요소에 달아둔 이벤트 리스너는, 자식 요소에서 발생한 이벤트에도 '반응'할 수 있습니다.
    </pre>

<ul id="parent"> 부모 (ul)
    <li id="child"> 자식 (li) </li>
</ul>

<script>
    const $parent = document.getElementById('parent');
    const $chile = document.getElementById('child');

    $parent.addEventListener('click', (e) => {
        alert('부모가 클릭을 감지 했습니다.');
        console.log('--- 부모 핸들러 ---');

        // e.target: 이벤트가 '발생힌' 지점
        console.log('e.target', e.target);

        // e.currentTarget: 인벤트 리스너가 '현재 부착된' 요소
        console.log('e.currentTarget', e.currentTarget);
    });

    $chile.addEventListener('click', (e) => {
        alert('자식이 클릭 되었습니다.');
    });
</script>

<hr>

<h3>2. 이벤트 위임: 똑똑하게 일 처리하기</h3>
<pre>
    이벤트 버블링을 활용하면, 여러 자식 요소에 각각 이벤트를 달 필요 없이,
    부모 요소에 이벤트 핸들러를 단 하나만 등록하여 모든 자식의 이벤트를 처리할 수 있습니다.
    이것을 '이벤트 위임'이라고 하며, 코드가 훨씬 효율적이고 유연해집니다.
    </pre>

<ul id="drink-list">
    <li>커피</li>
    <li>콜라</li>
    <li>우유</li>
</ul>
<button id="add-btn">음료 추가</button>

<script>
    const $drinkList = document.getElementById('drink-list');
    const $addBtn = document.getElementById('add-btn');

    function highliht(element) {
        element.classList.toggle('highlight');
    }

    $drinkList.addEventListener('click', (e) => {

        console.log('클릭된 요소', e.target);

        // 내가 원하는 li를 클릭했을 때만 highligth 를 적용하기 위함
        if (e.target.matches('li')) {
            highliht(e.target)
        }
    })

    // [이벤트 위임의 가장 큰 장점!]
    // 나중에 동적으로 추가되는 자식 요소에도 이밴트 핸들어가 자동으로 동작한다.
    $addBtn.addEventListener('click', () => {
        const $newLi = document.createElement('li');
        $newLi.textContent = '사이다';
        $drinkList.appendChild($newLi);
    });
</script>
</body>
</html>